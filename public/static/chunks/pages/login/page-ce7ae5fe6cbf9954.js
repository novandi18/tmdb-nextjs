(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{6147:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login/page",function(){return r(6643)}])},2882:function(e,t,r){"use strict";r.d(t,{O5:function(){return c},Qz:function(){return l},SO:function(){return m},uX:function(){return u}});var s=r(7066),n=r(5860),a=r(6984),o=r(403),i=r(1955);let d="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJjYzc3ZjMzNmY4NTlkYzM0ZGRiOWRhYzFmODc4ODJiMSIsIm5iZiI6MTcyOTA1MzU5My4yMzI1NjIsInN1YiI6IjY1NjdkYmE3MTI3Nzc4MDBhZDVmNTljNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.9vUNrlSEbJeeEHHEl9R6ylxjO_5fiG0_w25w7ZgNX3M",c=async()=>{try{let e=await s.Z.get("".concat(n.P.CREATE_GUEST_SESSION),{headers:{Authorization:"Bearer ".concat(d)}});if(e.data.success)return i.Z.set("tmdb_session_id",(0,o.HI)(e.data.guest_session_id)),i.Z.set("tmdb_user_type","guest"),e.data;return null}catch(e){return s.Z.isAxiosError(e)&&e.response?console.error(e.response.data.status_message):console.error("An unknown error occurred"),null}},u=async(e,t)=>{let r={account:null,sessionId:"",status:a.r.Loading,error:null};try{let c=(await s.Z.get(n.P.CREATE_REQUEST_TOKEN,{headers:{Authorization:"Bearer ".concat(d)}})).data.request_token;await s.Z.post(n.P.VALIDATE_REQUEST_TOKEN,{username:e,password:t,request_token:c},{headers:{Authorization:"Bearer ".concat(d)}});let u=(await s.Z.post(n.P.CREATE_SESSION,{request_token:c},{headers:{Authorization:"Bearer ".concat(d)}})).data.session_id,l=await s.Z.get(n.P.GET_ACCOUNT,{params:{session_id:u},headers:{Authorization:"Bearer ".concat(d)}}),m=l.data.id,h=l.data.name,p=l.data.avatar;r.account={avatar:p,id:m,name:h,username:e},r.sessionId=u,r.status=a.r.Success,i.Z.set("tmdb_session_id",(0,o.HI)(u)),i.Z.set("tmdb_user_type","user"),i.Z.set("tmdb_account_id",m.toString())}catch(e){r.status=a.r.Error,s.Z.isAxiosError(e)&&e.response?r.error=e.response.data.status_message:r.error="An unknown error occurred"}return r},l=()=>{i.Z.remove("tmdb_session_id"),i.Z.remove("tmdb_user_type"),i.Z.remove("tmdb_account_id")},m=async()=>{console.log((0,o.pe)(i.Z.get("tmdb_session_id")||""));try{let e=await s.Z.delete(n.P.DELETE_SESSION,{data:{session_id:(0,o.pe)(i.Z.get("tmdb_session_id")||"")},headers:{Authorization:"Bearer ".concat(d)}});return l(),e.data}catch(e){return s.Z.isAxiosError(e)&&e.response?console.error(e.response.data.status_message):console.error("An unknown error occurred"),null}}},6289:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(5893),n=r(7294);let a=n.forwardRef(function({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm3.844-8.791a.75.75 0 0 0-1.188-.918l-3.7 4.79-1.649-1.833a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.15-.043l4.25-5.5Z",clipRule:"evenodd"}))}),o=n.forwardRef(function({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm2.78-4.22a.75.75 0 0 1-1.06 0L8 9.06l-1.72 1.72a.75.75 0 1 1-1.06-1.06L6.94 8 5.22 6.28a.75.75 0 0 1 1.06-1.06L8 6.94l1.72-1.72a.75.75 0 1 1 1.06 1.06L9.06 8l1.72 1.72a.75.75 0 0 1 0 1.06Z",clipRule:"evenodd"}))}),i=n.forwardRef(function({title:e,titleId:t,...r},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{d:"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"}))});function d(e){let{message:t,type:r}=e,[d,c]=(0,n.useState)(!0);return(0,s.jsxs)("div",{className:"p-4 flex items-center mt-2 gap-2 justify-between text-sm ".concat("success"===r?"bg-green-200 text-green-800":"bg-red-200 text-red-800"," rounded-lg ").concat(d?"block":"hidden"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["success"===r?(0,s.jsx)(a,{className:"w-4 h-4"}):(0,s.jsx)(o,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:t})]}),(0,s.jsx)("button",{className:"p-1",onClick:()=>c(!1),children:(0,s.jsx)(i,{className:"w-4 h-4"})})]})}},5860:function(e,t,r){"use strict";r.d(t,{P:function(){return s}});let s={NOW_PLAYING:"https://api.themoviedb.org/3/movie/now_playing",POPULAR:"https://api.themoviedb.org/3/movie/popular",ADD_FAVORITE:e=>"https://api.themoviedb.org/3/account/".concat(e,"/favorite"),FAVORITE_MOVIES:e=>"https://api.themoviedb.org/3/account/".concat(e,"/favorite/movies"),DELETE_FAVORITE:(e,t)=>"https://api.themoviedb.org/3/account/".concat(e,"/favorite/").concat(t),CREATE_GUEST_SESSION:"https://api.themoviedb.org/3/authentication/guest_session/new",CREATE_REQUEST_TOKEN:"https://api.themoviedb.org/3/authentication/token/new",VALIDATE_REQUEST_TOKEN:"https://api.themoviedb.org/3/authentication/token/validate_with_login",AUTHENTICATE_USER:e=>"https://www.themoviedb.org/authenticate/".concat(e),CREATE_SESSION:"https://api.themoviedb.org/3/authentication/session/new",DELETE_SESSION:"https://api.themoviedb.org/3/authentication/session",GET_ACCOUNT:"https://api.themoviedb.org/3/account",GET_MOVIE_DETAIL:e=>"https://api.themoviedb.org/3/movie/".concat(e)}},6643:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(5893),n=r(2882),a=r(6289),o=r(6984),i=r(403),d=r(1163),c=r(7294),u=r(1955);function l(){let e=(0,d.useRouter)(),t=u.Z,[r,l]=(0,c.useState)(""),[m,h]=(0,c.useState)(""),[p,g]=(0,c.useState)(!1),[b,f]=(0,c.useState)(null),[_,x]=(0,c.useState)(!1),w=async s=>{if(s.preventDefault(),f(null),g(!0),!r||!m){f("Please enter your username and password");return}let a=await (0,n.uX)(r,m);if(a&&a.status===o.r.Success){var d,c,u;t.set("tmdb_session_id",(0,i.HI)(a.sessionId)),t.set("tmdb_name",(null===(d=a.account)||void 0===d?void 0:d.name)||""),t.set("tmdb_user_type","user"),t.set("tmdb_account_id",(null===(c=a.account)||void 0===c?void 0:c.id.toString())||""),t.set("tmdb_username",(null===(u=a.account)||void 0===u?void 0:u.username)||""),e.push("/")}else f("Invalid username or password"),g(!1)},E=async()=>{f(null),g(!0);let r=await (0,n.O5)();r&&r.success&&(t.set("tmdb_session_id",(0,i.HI)(r.guest_session_id)),t.set("tmdb_name","Guest User"),t.set("tmdb_user_type","guest"),e.push("/")),f("Failed to create guest session"),g(!1)};return(0,s.jsxs)("div",{className:"flex flex-col px-4 md:px-16 py-8 text-sky-950 dark:text-white",children:[(0,s.jsx)("h1",{className:"text-xl font-medium",children:"Login to your account"}),(0,s.jsx)("span",{className:"text-sm text-gray-500 mt-2 dark:text-gray-400",children:"In order to use the editing and rating capabilities of TMDB, as well as get personal recommendations you will need to login to your account."}),b&&(0,s.jsx)(a.Z,{message:b,type:"error"}),(0,s.jsxs)("form",{className:"mt-4",onSubmit:w,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-white",children:"Username"}),(0,s.jsx)("input",{type:"text",id:"username",name:"username",className:"mt-1 w-full rounded-md border-gray-200 bg-white text-sm text-gray-700 shadow-sm disabled:cursor-not-allowed disabled:bg-gray-100 disabled:dark:bg-gray-500 disabled:dark:border-gray-700 disabled:dark:text-gray-400",placeholder:"Username",required:!0,onChange:e=>l(e.target.value),disabled:p})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-white",children:"Password"}),(0,s.jsx)("input",{type:_?"text":"password",id:"password",name:"password",className:"mt-1 w-full rounded-md border-gray-200 bg-white text-sm text-gray-700 shadow-sm disabled:cursor-not-allowed disabled:bg-gray-100 disabled:dark:bg-gray-500 disabled:dark:border-gray-700 disabled:dark:text-gray-400",placeholder:"Password",required:!0,onChange:e=>h(e.target.value),disabled:p}),(0,s.jsxs)("label",{htmlFor:"Option1",className:"flex items-center gap-2 mt-2 cursor-pointer w-32",children:[(0,s.jsxs)("div",{className:"flex items-center",children:["â€‹",(0,s.jsx)("input",{type:"checkbox",className:"size-4 rounded border-gray-300",id:"Option1",onChange:()=>{x(!_)}})]}),(0,s.jsx)("span",{className:"text-sky-950 dark:text-white text-xs",children:"Show Password"})]})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",className:"mt-6 bg-sky-500 text-white py-2 rounded-md hover:bg-sky-600 transition-colors duration-300 px-6 text-sm disabled:cursor-not-allowed disabled:bg-sky-800",disabled:p,children:p?"Logging in...":"Login"}),(0,s.jsx)("button",{type:"button",className:"mt-6 text-sm text-gray-500 underline dark:text-gray-400 disabled:cursor-not-allowed",onClick:E,disabled:p,children:"Continue as guest"})]})]})]})}},6984:function(e,t,r){"use strict";var s,n;r.d(t,{r:function(){return s}}),(n=s||(s={}))[n.Idle=0]="Idle",n[n.Loading=1]="Loading",n[n.Success=2]="Success",n[n.Error=3]="Error"},403:function(e,t,r){"use strict";r.d(t,{HI:function(){return a},p6:function(){return n},pe:function(){return o}});var s=r(1876).Buffer;let n=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=e=>s.from(e).toString("base64"),o=e=>s.from(e,"base64").toString("utf-8")},1163:function(e,t,r){e.exports=r(7253)},1955:function(e,t,r){"use strict";function s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}r.d(t,{Z:function(){return n}});var n=function e(t,r){function n(e,n,a){if("undefined"!=typeof document){"number"==typeof(a=s({},r,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var i in a)a[i]&&(o+="; "+i,!0!==a[i]&&(o+="="+a[i].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],s={},n=0;n<r.length;n++){var a=r[n].split("="),o=a.slice(1).join("=");try{var i=decodeURIComponent(a[0]);if(s[i]=t.read(o,i),e===i)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){n(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=6147)}),_N_E=e.O()}]);